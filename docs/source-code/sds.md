# redis SDS
SDS 为简单动态字符串。

## 空间预分配
- SDS修改之后，如果len <1MB,那么分配和len一样的未使用空间。一共为len+len+1字节(末尾空)
- SDS修改之后，如果len >1MB,那么分配额外得1MB未使用空间。一共为len+1MB+1byte

目的：减少连续执行字符串增长操作所需的内存分配次数。

## 惰性空间释放
当SDS需要缩短时，不立即内存回收，使用free将字节数记录

目的：避免缩短字符串时所需要的内存重新分配次数。

## SDS的优点
- O(1) 获取字符串长度
- 杜绝缓冲区溢出
- 减少修改字符串长度时所需内存分配次数
- 兼容部分C字符串函数